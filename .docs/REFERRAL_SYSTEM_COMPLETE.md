# üîó REFERRAL SYSTEM - –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï

## ‚úÖ –°–¢–ê–¢–£–°: –†–ê–ë–û–¢–ê–ï–¢ –ß–ï–†–ï–ó API!

---

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–°–¢–ï–ú–ê –†–ï–§–ï–†–ê–õ–û–í

### 1Ô∏è‚É£ **Instant Rewards (–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã)**
- **1,000 TAMA** –∑–∞ –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **NO WALLET NEEDED!** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
- –ù–∞—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ Supabase

### 2Ô∏è‚É£ **Milestone Bonuses (–ë–æ–Ω—É—Å—ã –∑–∞ –≤–µ—Ö–∏)**
- **5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** ‚Üí +1,000 TAMA
- **10 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** ‚Üí +3,000 TAMA
- **25 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** ‚Üí +10,000 TAMA
- **50 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** ‚Üí +30,000 TAMA
- **100 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤** ‚Üí +100,000 TAMA + Legendary Badge!

---

## üîß –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –°–ò–°–¢–ï–ú–ê

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞:**
```python
# –ê–ª–≥–æ—Ä–∏—Ç–º (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤ –±–æ—Ç–µ –∏ –∏–≥—Ä–µ):
1. –ë–µ—Ä–µ–º telegram_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. SHA256 —Ö–µ—à –æ—Ç telegram_id
3. –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 3 –±–∞–π—Ç–∞ —Ö–µ—à–∞
4. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ Base36 (0-9, A-Z)
5. –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å "TAMA"
6. –†–µ–∑—É–ª—å—Ç–∞—Ç: TAMA44E30F (–ø—Ä–∏–º–µ—Ä)
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞:**
```python
# –í –±–æ—Ç–µ (bot.py):
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ: /start refTAMA44E30F
2. –ë–æ—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–¥ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
3. –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç –∫–æ–¥ ‚Üí –ø–æ–ª—É—á–∞–µ—Ç telegram_id —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —ç—Ç–æ –Ω–æ–≤—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª
5. –ù–∞—á–∏—Å–ª—è–µ—Ç 1,000 TAMA —Ä–µ—Ñ–µ—Ä–µ—Ä—É (—á–µ—Ä–µ–∑ Supabase)
6. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ referrals
7. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–ª—Å—Ç–æ—É–Ω—ã –∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç –±–æ–Ω—É—Å—ã
```

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –¢–∞–±–ª–∏—Ü–∞ referrals (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã)
CREATE TABLE referrals (
    id BIGSERIAL PRIMARY KEY,
    referrer_telegram_id TEXT NOT NULL,
    referred_telegram_id TEXT NOT NULL,
    referral_code TEXT,
    reward_given INTEGER DEFAULT 1000,
    status TEXT DEFAULT 'completed',
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ pending_referrals (–æ–∂–∏–¥–∞—é—â–∏–µ)
CREATE TABLE pending_referrals (
    id BIGSERIAL PRIMARY KEY,
    referrer_telegram_id TEXT NOT NULL,
    referred_telegram_id TEXT NOT NULL,
    referral_code TEXT,
    status TEXT DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ referral_settings (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–≥—Ä–∞–¥) - –ù–û–í–ê–Ø!
CREATE TABLE referral_settings (
    id SERIAL PRIMARY KEY,
    setting_key VARCHAR(100) UNIQUE NOT NULL,
    setting_value TEXT NOT NULL,
    description TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_by VARCHAR(100)
);
```

---

## üöÄ API –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ù–ê–ì–†–ê–î–ê–ú–ò

### **Endpoint:** `https://api.solanatamagotchi.com/api/referral-settings.php`

#### **GET - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
GET /api/referral-settings.php

Response:
{
  "success": true,
  "settings": {
    "referral_reward": {
      "value": "1000",
      "description": "TAMA reward for each referral",
      "updated_at": "2025-11-29T21:00:00Z"
    },
    "milestone_5": {
      "value": "1000",
      "description": "TAMA bonus for 5 referrals",
      "updated_at": "2025-11-29T21:00:00Z"
    },
    ...
  }
}
```

#### **POST - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
POST /api/referral-settings.php
Content-Type: application/json

{
  "settings": {
    "referral_reward": "1500",
    "milestone_5": "2000",
    "milestone_10": "5000",
    ...
  },
  "updated_by": "admin"
}

Response:
{
  "success": true,
  "message": "Settings updated successfully",
  "updated": ["referral_reward", "milestone_5", ...]
}
```

---

## üéõÔ∏è –ê–î–ú–ò–ù–ö–ê –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø

### **URL:** `https://solanatamagotchi.com/admin-referrals.html`

### **–í–∫–ª–∞–¥–∫–∏:**
1. **üìä Overview** - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö —Ä–µ—Ñ–µ—Ä–∞–ª—ã
2. **‚úÖ Active Referrals** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã
3. **‚è≥ Pending Referrals** - –û–∂–∏–¥–∞—é—â–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—ã
4. **üèÜ Top Referrers** - –¢–æ–ø —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤
5. **üéÅ Milestones** - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –º–∏–ª—Å—Ç–æ—É–Ω–∞–º
6. **‚öôÔ∏è Settings** - **–ù–û–í–ê–Ø!** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥–∞–º–∏

### **–í–∫–ª–∞–¥–∫–∞ Settings:**
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1,000 TAMA)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–∏–ª—Å—Ç–æ—É–Ω–æ–≤ (5, 10, 25, 50, 100)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `referral_settings` –≤ –ë–î

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ë–û–¢ –ï–©–ï –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢ API!

### **–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- ‚úÖ API —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
- ‚ùå –ë–æ—Ç **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ API (hardcoded –∑–Ω–∞—á–µ–Ω–∏—è)

### **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –û–±–Ω–æ–≤–∏—Ç—å `bot.py` —á—Ç–æ–±—ã –æ–Ω –ø–æ–ª—É—á–∞–ª –Ω–∞–≥—Ä–∞–¥—ã –∏–∑ API
2. –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –±–æ—Ç–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ Supabase –Ω–∞–ø—Ä—è–º—É—é

### **–ì–¥–µ –≤ –±–æ—Ç–µ hardcoded –∑–Ω–∞—á–µ–Ω–∏—è:**
```python
# bot.py —Å—Ç—Ä–æ–∫–∞ 617:
new_tama = current_tama + 1000  # 1,000 TAMA –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞

# bot.py —Å—Ç—Ä–æ–∫–∏ 667-681:
if total_referrals == 5:
    milestone_bonus = 1000
elif total_referrals == 10:
    milestone_bonus = 3000
# ... –∏ —Ç.–¥.
```

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ë–æ—Ç —á–∏—Ç–∞–µ—Ç –∏–∑ Supabase –Ω–∞–ø—Ä—è–º—É—é**
```python
def get_referral_settings():
    response = supabase.table('referral_settings').select('*').execute()
    settings = {}
    for s in response.data:
        settings[s['setting_key']] = int(s['setting_value'])
    return settings

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
settings = get_referral_settings()
referral_reward = settings.get('referral_reward', 1000)
milestone_5 = settings.get('milestone_5', 1000)
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API**
```python
import requests

def get_referral_settings():
    response = requests.get('https://api.solanatamagotchi.com/api/referral-settings.php')
    data = response.json()
    if data['success']:
        settings = {}
        for key, value in data['settings'].items():
            settings[key] = int(value['value'])
        return settings
    return {}  # Fallback to defaults
```

---

## ‚úÖ –ß–¢–û –£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢

1. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ (–æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –≤ –±–æ—Ç–µ –∏ –∏–≥—Ä–µ)
2. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
3. ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ 1,000 TAMA –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
4. ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –º–∏–ª—Å—Ç–æ—É–Ω –±–æ–Ω—É—Å–æ–≤
5. ‚úÖ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥–∞–º–∏
6. ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–≥—Ä–∞–¥
7. ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ë–î

---

## ‚ùå –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨

1. ‚ùå –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ —á—Ç–æ–±—ã –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ API/–ë–î
2. ‚ùå –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –±–æ—Ç–µ (—á—Ç–æ–±—ã –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑)
3. ‚ùå –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–≥—Ä–∞–¥ –≤ –∞–¥–º–∏–Ω–∫–µ

---

## üéØ –ò–¢–û–ì–û

**–°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑:**
- ‚úÖ –ë–æ—Ç ‚Üí Supabase (–Ω–∞–ø—Ä—è–º—É—é)
- ‚úÖ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥–∞–º–∏
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ —á—Ç–æ–±—ã –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ë–î –≤–º–µ—Å—Ç–æ hardcoded –∑–Ω–∞—á–µ–Ω–∏–π.

