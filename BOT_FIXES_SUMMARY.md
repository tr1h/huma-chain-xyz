# ü§ñ Bot Fixes Summary

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Markdown –æ—à–∏–±–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: `Can't find end of the entity starting at byte offset 154`
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –ó–∞–º–µ–Ω–∏–ª `parse_mode='Markdown'` –Ω–∞ `parse_mode='MarkdownV2'`
  - –î–æ–±–∞–≤–∏–ª —Ñ—É–Ω–∫—Ü–∏—é `escape_markdown()` –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
  - –ò—Å–ø—Ä–∞–≤–∏–ª f-—Å—Ç—Ä–æ–∫–∏ —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 2. API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–ü—Ä–æ–±–ª–µ–º–∞**: `Error getting NFT costs: Expecting value: line 1 column 1 (char 0)`
- **–†–µ—à–µ–Ω–∏–µ**:
  - –î–æ–±–∞–≤–∏–ª fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  - –£–ª—É—á—à–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å timeout
  - –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º API

### 3. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: `unexpected character after line continuation character`
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ f-—Å—Ç—Ä–æ–∫ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### 4. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ .env —Ñ–∞–π–ª–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: `'utf-8' codec can't decode byte 0xff`
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–ª .env —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **API —Ñ—É–Ω–∫—Ü–∏–∏** - fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
2. **NFT –∫–æ–º–∞–Ω–¥—ã** - `/mint`, `/my_nfts`, `/nft_costs`
3. **MarkdownV2** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful degradation

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
1. **API URL** - –∏–∑–º–µ–Ω–∏—Ç—å `TAMA_API_BASE` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. **Supabase –∫–ª—é—á** - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á –≤ .env
3. **Telegram —Ç–æ–∫–µ–Ω** - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–æ–≤
python test_bot_simple.py

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ .env)
python solana-tamagotchi/bot/bot.py
```

## üéØ NFT –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ

- `/mint` - –≤—ã–±–æ—Ä —Ä–µ–¥–∫–æ—Å—Ç–∏ NFT
- `/my_nfts` - –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `/nft_costs` - —Å—Ç–æ–∏–º–æ—Å—Ç—å NFT
- `/tama` - –±–∞–ª–∞–Ω—Å TAMA
- `/earn` - –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å TAMA
- `/spend` - –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å TAMA

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. **–ò–∑–º–µ–Ω–∏—Ç—å API URL** –≤ `bot.py`:
   ```python
   TAMA_API_BASE = "https://your-domain.com/api/tama"
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏** –≤ `.env`:
   ```
   TELEGRAM_BOT_TOKEN=your_real_token
   SUPABASE_KEY=your_real_supabase_key
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä** –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ —á—Ç–æ –∏ –±–æ—Ç

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!

–ë–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª—é—á–∏.




