# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏ —Ç–æ–∫–µ–Ω–æ–º–∏–∫–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞:

**–û—à–∏–±–∫–∞:** `column tama_transactions.type does not exist`

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –¢–∞–±–ª–∏—Ü–∞ `tama_transactions` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Supabase
- –ò–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –¥—Ä—É–≥–∞—è

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ:

### **1. –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ –∞–¥–º–∏–Ω–∫–∏:**
- –¢–µ–ø–µ—Ä—å –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü:
  1. `tama_economy` —Å –∫–æ–ª–æ–Ω–∫–æ–π `transaction_type`
  2. `withdrawals` 
  3. `leaderboard` —Å –∫–æ–ª–æ–Ω–∫–æ–π `total_withdrawn`

### **2. –°–æ–∑–¥–∞–Ω SQL —Å–∫—Ä–∏–ø—Ç:**
- –§–∞–π–ª: `sql/create_withdrawals_table.sql`
- –°–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ Supabase (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –ó–∞–π–¥–∏ –≤ Supabase Dashboard
2. SQL Editor ‚Üí New Query
3. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `sql/create_withdrawals_table.sql`
4. –í—ã–ø–æ–ª–Ω–∏ –∑–∞–ø—Ä–æ—Å

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É**

–ï—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ —Å –≤—ã–≤–æ–¥–∞–º–∏:
- –ü—Ä–æ–≤–µ—Ä—å –µ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ê–¥–º–∏–Ω–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç –Ω–∞–π—Ç–∏ –¥–∞–Ω–Ω—ã–µ

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è):

### **tama_economy:**
```sql
- id (BIGSERIAL)
- telegram_id (TEXT)
- transaction_type (TEXT) -- 'withdrawal', 'earning', etc
- amount (BIGINT)
- fee (BIGINT)
- signature (TEXT)
- wallet_address (TEXT)
- created_at (TIMESTAMP)
```

### **–ò–ª–∏ withdrawals:**
```sql
- id (BIGSERIAL)
- telegram_id (TEXT)
- amount (BIGINT)
- wallet_address (TEXT)
- tx_signature (TEXT)
- created_at (TIMESTAMP)
```

---

## üöÄ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã:

1. –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω–∫–∏
2. –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ï—Å–ª–∏ –≤—ã–≤–æ–¥—ã –±—ã–ª–∏ - –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ

---

## ‚úÖ –°—Ç–∞—Ç—É—Å:

- [x] –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü)
- [x] SQL —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω
- [ ] –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ Supabase (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é)

---

## üí° –ß—Ç–æ –¥–∞–ª—å—à–µ:

1. –°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –≤ Supabase (–∏—Å–ø–æ–ª—å–∑—É–π SQL —Å–∫—Ä–∏–ø—Ç)
2. –û–±–Ω–æ–≤–∏ –∞–¥–º–∏–Ω–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É

