# üîß NFT System - –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö

**–î–∞—Ç–∞:** 21 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–°–∏–º–≤–æ–ª—ã `">"` –≤ NFT –∫–∞—Ä—Ç–æ—á–∫–∞—Ö** ‚ùå
**–ü—Ä–æ–±–ª–µ–º–∞:** –í NFT –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–∏–º–≤–æ–ª—ã `">"` –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

**–ü—Ä–∏—á–∏–Ω–∞:**
- –§—É–Ω–∫—Ü–∏—è `escapeHtml` –±—ã–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ `forEach`, —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –î–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –º–æ–≥–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å HTML –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–ª—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –í—ã–Ω–µ—Å `escapeHtml` –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
- ‚úÖ –£–ª—É—á—à–∏–ª —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –≤ HTML
- ‚úÖ –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `nft` –æ–±—ä–µ–∫—Ç–∞ —Ç–µ–ø–µ—Ä—å —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è

---

### 2. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ NFT –∫–∞—Ä—Ç–æ—á–∫—É** ‚ùå
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ NFT –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞–∂–¥—É—é NFT –∫–∞—Ä—Ç–æ—á–∫—É
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ NFT –ø—Ä–∏ –∫–ª–∏–∫–µ
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - –ë–æ–ª—å—à–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ NFT
  - –í—Å–µ –¥–µ—Ç–∞–ª–∏ (Design, Minted date, Price, etc.)
  - –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ Explorer/Phantom
  - –°—Ç–∞—Ç—É—Å (On-Chain –∏–ª–∏ Off-Chain)

---

### 3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è NFT –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —ç–º–æ–¥–∑–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö IPFS –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–∞ `getNFTImageUrl(tier, rarity)` —Ä–∞–±–æ—Ç–∞–µ—Ç
- IPFS URLs –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∫–æ–¥–µ
- –ù–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑-–∑–∞:
  - IPFS gateway –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
  - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ IPFS
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URLs

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ —ç–º–æ–¥–∑–∏ –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `onerror` handler –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚ö†Ô∏è TODO: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ IPFS URLs –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

### 4. **–°–∏—Å—Ç–µ–º–∞ –¥–∏–∑–∞–π–Ω–æ–≤ NFT –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ NFT –æ–¥–Ω–æ–≥–æ —Ç–∏—Ä–∞ –∏ —Ä–µ–¥–∫–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –¢–∞–±–ª–∏—Ü–∞ `nft_designs` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ
- –ö–∞–∂–¥—ã–π NFT –∏–º–µ–µ—Ç `nft_design_id` –∏ `design_number`
- –ù–æ —Å–∏—Å—Ç–µ–º–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `tier + rarity`, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π `design_number`

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `nft_design_id` –≤ –∫–æ–¥–µ
- ‚ö†Ô∏è TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ `nft_design_id` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `nft_designs`
- ‚ö†Ô∏è TODO: –ö–∞–∂–¥—ã–π `design_number` –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–≤–æ–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

---

## üìä –†–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ NFT:

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. **–°–∫–æ–ª—å–∫–æ NFT –≤ –±–∞–∑–µ?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `user_nfts`
   - –°–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (`is_active = true`)?

2. **–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω—ã–µ?**
   - `tier_name` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: Bronze, Silver, Gold, Platinum, Diamond
   - `rarity` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: Common, Uncommon, Rare, Epic, Legendary
   - `design_number` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ NFT
   - `nft_design_id` - –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ `nft_designs.id`

3. **–°–∫–æ–ª—å–∫–æ NFT on-chain?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `nft_mint_address` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å base58 –∞–¥—Ä–µ—Å (–Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `_`)
   - –°–∫–æ–ª—å–∫–æ NFT –∏–º–µ—é—Ç —Ä–µ–∞–ª—å–Ω—ã–π `nft_mint_address`?

---

## üé® –ë—É–¥—É—â–∏–µ –º–∏–Ω—Ç—ã NFT - —Ä–∞–∑–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏?

### –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **–°–µ–π—á–∞—Å:** –í—Å–µ NFT –æ–¥–Ω–æ–≥–æ —Ç–∏—Ä–∞+—Ä–µ–¥–∫–æ—Å—Ç–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É `design_number` –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

### –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **–¢–∞–±–ª–∏—Ü–∞ `nft_designs`:** –•—Ä–∞–Ω–∏—Ç 5,000 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–∏–∑–∞–π–Ω–æ–≤
  - Bronze: 4,500 –¥–∏–∑–∞–π–Ω–æ–≤
  - Silver: 350 –¥–∏–∑–∞–π–Ω–æ–≤
  - Gold: 130 –¥–∏–∑–∞–π–Ω–æ–≤
  - Platinum: 18 –¥–∏–∑–∞–π–Ω–æ–≤
  - Diamond: 2 –¥–∏–∑–∞–π–Ω–∞

- **–ö–∞–∂–¥—ã–π –¥–∏–∑–∞–π–Ω –∏–º–µ–µ—Ç:**
  - `design_number` (1-4500 –¥–ª—è Bronze, –∏ —Ç.–¥.)
  - `design_theme` (Baby Creatures, Happy Eggs, etc.)
  - `design_variant` (Green, Blue, Red, etc.)
  - `image_url` (IPFS/Arweave URL) - **–ù–£–ñ–ù–û –ó–ê–ü–û–õ–ù–ò–¢–¨!**

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
1. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `nft_designs` —Å–æ–∑–¥–∞–Ω–∞
2. ‚úÖ –ó–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–∑–¥–∞–Ω—ã (5,000 –¥–∏–∑–∞–π–Ω–æ–≤)
3. ‚ùå **`image_url` –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω** - –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ IPFS/Arweave
4. ‚ùå **–ö–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `nft_design_id`** - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `getNFTImageUrl` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `design_number`

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ –§—É–Ω–∫—Ü–∏—è `escapeHtml` –≤—ã–Ω–µ—Å–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ
2. ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –≤ HTML
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ NFT –∫–∞—Ä—Ç–æ—á–∫—É
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ NFT
5. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ NFT –≤ –±–∞–∑–µ:**
   ```sql
   SELECT COUNT(*) FROM user_nfts WHERE is_active = true;
   SELECT tier_name, rarity, COUNT(*) FROM user_nfts GROUP BY tier_name, rarity;
   SELECT COUNT(*) FROM user_nfts WHERE nft_mint_address NOT LIKE '%_%' AND LENGTH(nft_mint_address) > 30;
   ```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ IPFS:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `nft-assets/upload-to-ipfs.js`
   - –û–±–Ω–æ–≤–∏—Ç—å `image_url` –≤ —Ç–∞–±–ª–∏—Ü–µ `nft_designs`

3. **–û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –ò–∑–º–µ–Ω–∏—Ç—å `getNFTImageUrl` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `nft_design_id`
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å `image_url` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `nft_designs` –ø–æ `design_number`

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞:**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–∫ –Ω–∞ NFT –∫–∞—Ä—Ç–æ—á–∫—É
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ NFT –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

