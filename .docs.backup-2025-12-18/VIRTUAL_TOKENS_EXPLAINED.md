# 💡 ВИРТУАЛЬНЫЕ ТОКЕНЫ: КАК ЭТО РАБОТАЕТ

## ❓ ВОПРОС: "Ну они же виртуальные!? Пока что до вывода или как? Независимо от выводов из основного пула (400M)"

**ОТВЕТ:** Объясняю механику виртуальных токенов! ✅

---

## 🎯 ЧТО ТАКОЕ ВИРТУАЛЬНЫЕ ТОКЕНЫ?

### Простыми словами:

```
ВИРТУАЛЬНЫЕ ТОКЕНЫ = Записи в базе данных
├─ Существуют ТОЛЬКО в Supabase
├─ НЕ на блокчейне
├─ Просто число: leaderboard.tama = 10000
└─ До вывода = виртуальные ✅
```

### Технически:

```
┌─────────────────────────────────────┐
│  ВИРТУАЛЬНЫЕ ТОКЕНЫ (до вывода)     │
├─────────────────────────────────────┤
│  Таблица: leaderboard               │
│  Колонка: tama                      │
│  Значение: 10000                    │
│  Место: Supabase (база данных)      │
│  Статус: Виртуальные ✅             │
└─────────────────────────────────────┘
              ↓ ВЫВОД
┌─────────────────────────────────────┐
│  РЕАЛЬНЫЕ ТОКЕНЫ (после вывода)     │
├─────────────────────────────────────┤
│  Тип: SPL Token                     │
│  Место: Solana Blockchain           │
│  Адрес: User Wallet                 │
│  Статус: Реальные ✅                │
└─────────────────────────────────────┘
```

---

## 📊 КАК РАБОТАЕТ DAILY POOL?

### Daily Pool распределяется НЕЗАВИСИМО от выводов:

```
День 1:
├─ Daily Pool: 800,000 TAMA (из основного пула 400M)
├─ Распределяется между игроками (по кликам)
├─ Игроки получают: 800,000 TAMA (виртуальные)
├─ Записывается в базу: leaderboard.tama += их доля
└─ Выводов: 0 или 100% - НЕ ВАЖНО! ✅

День 2:
├─ Daily Pool: 800,000 TAMA (из основного пула 400M)
├─ Распределяется между игроками (по кликам)
├─ Игроки получают: 800,000 TAMA (виртуальные)
├─ Записывается в базу: leaderboard.tama += их доля
└─ Выводов: 0 или 100% - НЕ ВАЖНО! ✅
```

### Ключевой момент:

```
✅ Daily Pool распределяется КАЖДЫЙ ДЕНЬ
✅ Независимо от выводов
✅ Из основного пула (400M)
✅ В виртуальные токены (база данных)
✅ Выводы НЕ влияют на Daily Pool! ✅
```

---

## 🔄 ЖИЗНЕННЫЙ ЦИКЛ ТОКЕНОВ

### Этап 1: Распределение Daily Pool

```
День 1, 00:00 UTC:
├─ Daily Pool: 800,000 TAMA (из пула 400M)
├─ Распределяется между игроками (по кликам)
├─ Игрок 1: +10,000 TAMA (виртуальные)
├─ Игрок 2: +5,000 TAMA (виртуальные)
├─ Игрок 3: +15,000 TAMA (виртуальные)
└─ Записывается в базу: leaderboard.tama += их доля

Статус: ВИРТУАЛЬНЫЕ ✅
Место: Supabase (база данных)
Блокчейн: НЕТ токенов ещё
```

### Этап 2: Накопление (игроки НЕ выводят)

```
День 1-30:
├─ Daily Pool: 800,000 TAMA/день
├─ Распределено: 24,000,000 TAMA (виртуальные)
├─ Выводов: 0
├─ Виртуальных в системе: 24M TAMA
└─ Блокчейн: 0 TAMA (ничего не создано)

Статус: ВИРТУАЛЬНЫЕ ✅
Место: Supabase (база данных)
Блокчейн: НЕТ токенов ещё
```

### Этап 3: Вывод (игроки выводят)

```
День 31:
├─ Игрок 1 выводит: 10,000 TAMA
├─ Проверка: leaderboard.tama >= 10,000 ✅
├─ Fee (5%): 500 TAMA
├─ Amount sent: 9,500 TAMA
│
├─ ШАГ 1: Списать виртуальные
│  └─ leaderboard.tama -= 10,000 (виртуальные сгорели!)
│
├─ ШАГ 2: Создать реальные
│  └─ spl-token transfer 9,500 TAMA → user_wallet
│
└─ Результат:
   ├─ Виртуальных: -10,000 (сгорели) ✅
   ├─ Реальных: +9,500 (на блокчейне) ✅
   └─ Fee: 500 (виртуальные, распределяются)

Статус: РЕАЛЬНЫЕ ✅
Место: Solana Blockchain (user wallet)
Блокчейн: 9,500 TAMA создано
```

---

## 💡 КЛЮЧЕВЫЕ ПОНИМАНИЯ

### 1. Виртуальные = до вывода:

```
✅ ДА! Виртуальные токены существуют ТОЛЬКО до вывода
✅ После вывода они "сгорают" (удаляются из базы)
✅ Вместо них создаются реальные токены на блокчейне
```

### 2. Daily Pool независим от выводов:

```
✅ ДА! Daily Pool распределяется КАЖДЫЙ ДЕНЬ
✅ Независимо от того, выводят игроки или нет
✅ Из основного пула (400M)
✅ В виртуальные токены (база данных)
```

### 3. Основной пул (400M):

```
✅ Это РЕАЛЬНЫЙ пул на блокчейне (или будет)
✅ Daily Pool берётся из этого пула
✅ Распределяется каждый день
✅ Независимо от выводов
```

---

## 📊 ПРИМЕР: 30 ДНЕЙ БЕЗ ВЫВОДОВ

### День 1-30:

```
Daily Pool: 800,000 TAMA/день
Распределено: 24,000,000 TAMA (виртуальные)
Выводов: 0

В базе данных:
├─ Игрок 1: 100,000 TAMA (виртуальные)
├─ Игрок 2: 50,000 TAMA (виртуальные)
├─ Игрок 3: 200,000 TAMA (виртуальные)
└─ ... всего 24M TAMA (виртуальные)

На блокчейне:
└─ 0 TAMA (ничего не создано)

Основной пул (400M):
├─ Было: 400,000,000 TAMA
├─ Распределено: 24,000,000 TAMA (виртуальные)
└─ Осталось: 376,000,000 TAMA (для будущих дней)
```

### День 31: Массовый вывод

```
Игроки выводят: 24,000,000 TAMA (все виртуальные)

В базе данных:
├─ Игрок 1: 0 TAMA (виртуальные сгорели)
├─ Игрок 2: 0 TAMA (виртуальные сгорели)
├─ Игрок 3: 0 TAMA (виртуальные сгорели)
└─ ... всего 0 TAMA (виртуальные)

На блокчейне:
├─ Создано: 22,800,000 TAMA (24M - 5% fee)
├─ Fee: 1,200,000 TAMA
│  ├─ Burn (40%): 480,000 TAMA
│  ├─ Pool (50%): 600,000 TAMA → возврат в пул
│  └─ Team (10%): 120,000 TAMA
└─ Всего реальных: 22,800,000 TAMA

Основной пул (400M):
├─ Было: 376,000,000 TAMA
├─ Возврат fee: 600,000 TAMA
└─ Стало: 376,600,000 TAMA ✅
```

---

## 🎯 ОТВЕТЫ НА ВОПРОСЫ

### 1. "Ну они же виртуальные!? Пока что до вывода или как?"

```
✅ ДА! Виртуальные токены существуют ТОЛЬКО до вывода
✅ Это просто записи в базе данных (Supabase)
✅ После вывода они "сгорают" (удаляются)
✅ Вместо них создаются реальные токены на блокчейне
```

### 2. "Независимо от выводов из основного пула (400M)"

```
✅ ДА! Daily Pool распределяется КАЖДЫЙ ДЕНЬ
✅ Независимо от того, выводят игроки или нет
✅ Из основного пула (400M)
✅ В виртуальные токены (база данных)
✅ Выводы НЕ влияют на Daily Pool! ✅
```

---

## 📈 ВИЗУАЛИЗАЦИЯ

```
┌─────────────────────────────────────────┐
│  ОСНОВНОЙ ПУЛ (400M)                    │
│  Место: Блокчейн (или будет)           │
│  Статус: РЕАЛЬНЫЙ пул                   │
└──────────────┬──────────────────────────┘
               │
               │ Daily Pool: 800k/день
               ↓
┌─────────────────────────────────────────┐
│  DAILY POOL РАСПРЕДЕЛЕНИЕ               │
│  Каждый день, независимо от выводов     │
│  Распределяется между игроками          │
└──────────────┬──────────────────────────┘
               │
               │ В виртуальные токены
               ↓
┌─────────────────────────────────────────┐
│  ВИРТУАЛЬНЫЕ ТОКЕНЫ                     │
│  Место: Supabase (база данных)         │
│  Статус: Виртуальные (до вывода)        │
│  Пример: leaderboard.tama = 10000       │
└──────────────┬──────────────────────────┘
               │
               │ Вывод
               ↓
┌─────────────────────────────────────────┐
│  РЕАЛЬНЫЕ ТОКЕНЫ                        │
│  Место: Solana Blockchain              │
│  Статус: Реальные (на блокчейне)        │
│  Пример: User Wallet = 9500 TAMA       │
└─────────────────────────────────────────┘
```

---

## ✅ ИТОГО

### Виртуальные токены:

```
✅ Существуют ТОЛЬКО до вывода
✅ Это записи в базе данных (Supabase)
✅ После вывода "сгорают" (удаляются)
✅ Вместо них создаются реальные токены
```

### Daily Pool:

```
✅ Распределяется КАЖДЫЙ ДЕНЬ
✅ Независимо от выводов
✅ Из основного пула (400M)
✅ В виртуальные токены (база данных)
```

### Основной пул (400M):

```
✅ Это РЕАЛЬНЫЙ пул (или будет)
✅ Daily Pool берётся из этого пула
✅ Распределяется каждый день
✅ Независимо от выводов
```

---

**Виртуальные = до вывода, Daily Pool = независимо от выводов!** ✅

