# üé∞ JACKPOT POOL IMPLEMENTATION

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** üìä

- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `slots_jackpot_pool` (–æ–¥–∏–Ω —Ä—è–¥ —Å —Ç–µ–∫—É—â–∏–º –ø—É–ª–æ–º)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `slots_jackpot_history` (–∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤—ã–∏–≥—Ä—ã—à–µ–π)
- ‚úÖ SQL —Ñ–∞–π–ª: `sql/create_slots_jackpot_pool.sql`

### 2. **API** üîå

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `/api/tama/slots/spin`:
  - –î–æ–±–∞–≤–ª—è–µ—Ç 5% –æ—Ç –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏ –≤ –¥–∂–µ–∫–ø–æ—Ç –ø—É–ª
  - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–∂–µ–∫–ø–æ—Ç (üé∞üé∞üé∞)
  - –û—Ç–¥–∞–µ—Ç –≤–µ—Å—å –ø—É–ª –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ –¥–∂–µ–∫–ø–æ—Ç–∞
  - –õ–æ–≥–∏—Ä—É–µ—Ç –≤—ã–∏–≥—Ä—ã—à –≤ –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `/api/tama/slots/jackpot` (GET):
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (total_contributed, total_won, wins_count)
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ

### 3. **Frontend (slots.html)** üé®

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç –ø—É–ª–∞ –≤ UI
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–ª–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–ø–∏–Ω–∞
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ –¥–∂–µ–∫–ø–æ—Ç–∞
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ —Å–∏–º–≤–æ–ª–æ–≤ –≤ API –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∂–µ–∫–ø–æ—Ç–∞

### 4. **Bot (bot.py)** ü§ñ

- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç –ø—É–ª–∞ –≤ –º–µ–Ω—é `/slots`
- ‚úÖ –õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 5% –≤ –ø—É–ª –ø—Ä–∏ —Å—Ç–∞–≤–∫–µ
- ‚úÖ –í—ã–¥–∞—á–∞ –≤—Å–µ–≥–æ –ø—É–ª–∞ –ø—Ä–∏ üé∞üé∞üé∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—É–ª–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å–ø–∏–Ω–∞

---

## üéØ –ú–ï–•–ê–ù–ò–ö–ê:

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ö–∞–∂–¥–∞—è —Å—Ç–∞–≤–∫–∞** ‚Üí 5% –∏–¥–µ—Ç –≤ –¥–∂–µ–∫–ø–æ—Ç –ø—É–ª
2. **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–ø–∏–Ω—ã** ‚Üí –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç –≤ –ø—É–ª
3. **üé∞üé∞üé∞ –≤—ã–ø–∞–¥–∞–µ—Ç** ‚Üí –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –í–ï–°–¨ –ø—É–ª
4. **–ü–æ—Å–ª–µ –≤—ã–∏–≥—Ä—ã—à–∞** ‚Üí –ø—É–ª —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 0

### –ü—Ä–∏–º–µ—Ä:

```
–ü—É–ª: 0 TAMA
–ò–≥—Ä–æ–∫ 1 —Å—Ç–∞–≤–∏—Ç 1000 TAMA ‚Üí +50 TAMA –≤ –ø—É–ª (5%)
–ü—É–ª: 50 TAMA
–ò–≥—Ä–æ–∫ 2 —Å—Ç–∞–≤–∏—Ç 2000 TAMA ‚Üí +100 TAMA –≤ –ø—É–ª (5%)
–ü—É–ª: 150 TAMA
–ò–≥—Ä–æ–∫ 3 —Å—Ç–∞–≤–∏—Ç 500 TAMA ‚Üí +25 TAMA –≤ –ø—É–ª (5%)
–ü—É–ª: 175 TAMA
–ò–≥—Ä–æ–∫ 4 –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç üé∞üé∞üé∞ ‚Üí –ø–æ–ª—É—á–∞–µ—Ç 175 TAMA!
–ü—É–ª: 0 TAMA (—Å–±—Ä–æ—à–µ–Ω)
```

---

## üìã –£–°–¢–ê–ù–û–í–ö–ê:

### 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase:

```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∏–∑ —Ñ–∞–π–ª–∞:
sql/create_slots_jackpot_pool.sql
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API:

- ‚úÖ `/api/tama/slots/spin` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∂–µ–∫–ø–æ—Ç–æ–º
- ‚úÖ `/api/tama/slots/jackpot` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–ª

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Frontend:

- ‚úÖ `slots.html` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É–ª
- ‚úÖ –î–∂–µ–∫–ø–æ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Bot:

- ‚úÖ `/slots` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É–ª
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ø–∏–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—É–ª

---

## üéÆ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:

### –í —á–∞—Ç–µ –±–æ—Ç–∞:

```
/slots ‚Üí –≤–∏–¥–∏—à—å —Ç–µ–∫—É—â–∏–π –ø—É–ª
–°—Ç–∞–≤–∏—à—å ‚Üí 5% –∏–¥–µ—Ç –≤ –ø—É–ª
–í—ã–∏–≥—Ä—ã–≤–∞–µ—à—å üé∞üé∞üé∞ ‚Üí –ø–æ–ª—É—á–∞–µ—à—å –≤–µ—Å—å –ø—É–ª!
```

### –ù–∞ —Å–∞–π—Ç–µ:

```
slots.html ‚Üí –≤–∏–¥–∏—à—å –ø—É–ª –≤–≤–µ—Ä—Ö—É
–ò–≥—Ä–∞–µ—à—å ‚Üí –ø—É–ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–í—ã–∏–≥—Ä—ã–≤–∞–µ—à—å –¥–∂–µ–∫–ø–æ—Ç ‚Üí —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:

### –¢–∞–±–ª–∏—Ü–∞ `slots_jackpot_pool`:

- `current_pool` - —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞
- `total_contributed` - –≤—Å–µ–≥–æ –≤–Ω–µ—Å–µ–Ω–æ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è
- `total_won` - –≤—Å–µ–≥–æ –≤—ã–∏–≥—Ä–∞–Ω–æ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è
- `wins_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∏–≥—Ä—ã—à–µ–π
- `last_winner_*` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ

### –¢–∞–±–ª–∏—Ü–∞ `slots_jackpot_history`:

- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤—ã–∏–≥—Ä—ã—à–µ–π –¥–∂–µ–∫–ø–æ—Ç–∞
- –ö—Ç–æ, –∫–æ–≥–¥–∞, —Å–∫–æ–ª—å–∫–æ –≤—ã–∏–≥—Ä–∞–ª
- –†–∞–∑–º–µ—Ä –ø—É–ª–∞ –¥–æ –∏ –ø–æ—Å–ª–µ

---

## üî• –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ò–≥—Ä–æ–∫–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –≤—ã–∏–≥—Ä–∞—Ç—å –æ–±—â–∏–π –¥–∂–µ–∫–ø–æ—Ç –ø—É–ª! üé∞üé∞üé∞
