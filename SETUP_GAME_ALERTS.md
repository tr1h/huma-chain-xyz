# ðŸ”” SETUP GAME ALERTS - Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐ°Ñ…

## Ð§Ñ‚Ð¾ ÑÑ‚Ð¾?

ÐšÐ¾Ð³Ð´Ð° Ð¸Ð³Ñ€Ð¾Ðº Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹Ð²Ð°ÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¿Ñ€Ð¸Ð· Ð² ÑÐ»Ð¾Ñ‚Ð°Ñ… (x10+ Ð¸Ð»Ð¸ >= 50,000 TAMA), API Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ñƒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ ÐµÐ³Ð¾ Ð² ÐºÐ°Ð½Ð°Ð»Ðµ.

---

## ðŸŽ¯ ÐšÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:

```
slots.html (WebApp)
    â†“
    Ð˜Ð³Ñ€Ð¾Ðº Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹Ð²Ð°ÐµÑ‚ 25,000 TAMA (x50)
    â†“
api/tama_supabase.php
    â†“
    ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð²Ð°ÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹Ñˆ
    â†“
    ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ webhook Ð½Ð° Ð±Ð¾Ñ‚Ð°
    â†“
bot/bot.py (/game-alerts)
    â†“
    ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ
    â†“
    ÐŸÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ Ð² ÐºÐ°Ð½Ð°Ð»/Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ
```

---

## ðŸ“‹ Ð¨ÐÐ“ 1: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

### ÐÐ° Railway (Ð³Ð´Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ API):

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹ Railway Dashboard
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ñ API
3. ÐžÑ‚ÐºÑ€Ð¾Ð¹ **Variables**
4. Ð”Ð¾Ð±Ð°Ð²ÑŒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ:

```
BOT_WEBHOOK_URL=https://YOUR_BOT_DOMAIN/game-alerts
```

**Ð“Ð´Ðµ Ð²Ð·ÑÑ‚ÑŒ `YOUR_BOT_DOMAIN`?**

- Ð•ÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð½Ð° Railway: `https://your-bot-name.up.railway.app/game-alerts`
- Ð•ÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð½Ð° Render: `https://your-bot-name.onrender.com/game-alerts`

### ÐŸÑ€Ð¸Ð¼ÐµÑ€:

```
BOT_WEBHOOK_URL=https://solanatamagotchi-bot.up.railway.app/game-alerts
```

---

## ðŸ“‹ Ð¨ÐÐ“ 2: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° endpoint Ð² Ð±Ð¾Ñ‚Ðµ

Endpoint ÑƒÐ¶Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² `bot/bot.py`:

```python
@app.route('/game-alerts', methods=['POST'])
def game_alerts():
    """Receive game alerts from API"""
    data = request.get_json()
    alert_type = data.get('type')
    
    if alert_type == 'jackpot_win':
        send_jackpot_alert(...)
    elif alert_type == 'big_win':
        send_big_win_alert(...)
    
    return {'status': 'success'}, 200
```

---

## ðŸ“‹ Ð¨ÐÐ“ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ°Ð½Ð°Ð»Ð°/Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹

Ð£Ð±ÐµÐ´Ð¸ÑÑŒ, Ñ‡Ñ‚Ð¾ Ð² `bot/bot.py` Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹:

```python
CHANNEL_USERNAME = '@your_channel'  # ÐšÐ°Ð½Ð°Ð» Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸
GROUP_ID = -1001234567890  # ID Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
```

---

## ðŸ§ª Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•

### 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð°:

Ð’ Railway Dashboard â†’ Variables â†’ `BOT_WEBHOOK_URL` Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð°.

### 2. Ð¡Ð´ÐµÐ»Ð°Ð¹ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ ÑÐ¿Ð¸Ð½:

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹ ÑÐ»Ð¾Ñ‚Ñ‹: `/slots`
2. Ð¡Ð´ÐµÐ»Ð°Ð¹ ÑÐ¿Ð¸Ð½ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÑÑ‚Ð°Ð²ÐºÐ¾Ð¹
3. Ð•ÑÐ»Ð¸ Ð²Ñ‹Ð¸Ð³Ñ€Ð°ÐµÑˆÑŒ x10+ Ð¸Ð»Ð¸ >= 50,000 TAMA, Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸Ð¹Ñ‚Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð² ÐºÐ°Ð½Ð°Ð»

### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»Ð¾Ð³Ð¸ API:

Ð’ Railway â†’ Logs â†’ API Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÐ¸:

```
ðŸ”” Big win alert webhook sent to bot
```

Ð˜Ð»Ð¸:

```
âš ï¸ Failed to send big win alert to bot: ...
```

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°:

Ð’ Railway â†’ Logs â†’ Bot Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÐ¸:

```
ðŸŽ° Received game alert: big_win
âœ… Big win alert sent to channel
```

---

## ðŸŽ° Ð£Ð¡Ð›ÐžÐ’Ð˜Ð¯ ÐÐ›Ð•Ð Ð¢ÐžÐ’

### Jackpot Alert (ðŸŽ°ðŸŽ°ðŸŽ°):
- Ð¢Ñ€Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð´Ð¶ÐµÐºÐ¿Ð¾Ñ‚Ð°
- Ð’Ñ‹Ð¸Ð³Ñ€Ñ‹Ñˆ = Ð²ÐµÑÑŒ Ð¿ÑƒÐ»
- ÐŸÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ Ð² ÐºÐ°Ð½Ð°Ð»Ðµ Ð¸ Ð³Ñ€ÑƒÐ¿Ð¿Ðµ
- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÑŽ

### Big Win Alert:
- **x50+**: ðŸ‘‘ MEGA WIN!
- **x20+**: â­ BIG WIN!
- **x10+**: ðŸŽ‰ NICE WIN!
- **>= 50,000 TAMA**: ðŸ’ŽðŸ’ŽðŸ’Ž HUGE WIN!

ÐŸÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² ÐºÐ°Ð½Ð°Ð»Ðµ (Ð½Ðµ ÑÐ¿Ð°Ð¼Ð¸Ñ‚ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ).

---

## ðŸ”§ TROUBLESHOOTING

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ 1: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ `BOT_WEBHOOK_URL`**

```bash
# Ð’ Railway Dashboard â†’ API â†’ Variables
BOT_WEBHOOK_URL=https://your-bot.up.railway.app/game-alerts
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ 2: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½**

```bash
# Ð’ Railway Dashboard â†’ Bot â†’ Logs
âœ… Webhook set successfully!
Bot started!
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ ÐºÐ°Ð½Ð°Ð» Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½**

```python
# Ð’ bot/bot.py
CHANNEL_USERNAME = '@your_channel'  # Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ°Ð½Ð°Ð»
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð¿Ñ€Ð°Ð²Ð° Ð±Ð¾Ñ‚Ð° Ð² ÐºÐ°Ð½Ð°Ð»Ðµ**

- Ð‘Ð¾Ñ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼ ÐºÐ°Ð½Ð°Ð»Ð°
- Ð‘Ð¾Ñ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¾ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð»Ð¾Ð³Ð°Ñ… API

```
âš ï¸ Failed to send big win alert to bot: Connection refused
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ `BOT_WEBHOOK_URL` Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ endpoint `/game-alerts` ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚

---

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð‘Ð¾Ñ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ, Ð½Ð¾ Ð½Ðµ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°:

```
âŒ Error sending big win alert: ...
```

2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ ÐºÐ°Ð½Ð°Ð»Ð°
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾ `CHANNEL_USERNAME` Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹

---

## ðŸ“Š ÐŸÐ Ð˜ÐœÐ•Ð  Ð£Ð’Ð•Ð”ÐžÐœÐ›Ð•ÐÐ˜Ð¯

### Big Win (x50):

```
ðŸ‘‘ MEGA WIN! ðŸ‘‘

ðŸ† @username
ðŸ‘‘ ðŸ‘‘ ðŸ‘‘

ðŸ’° Won: 25,000 TAMA (x50)

ðŸŽ° Try your luck: /slots
```

### Jackpot:

```
ðŸŽ°ðŸŽ°ðŸŽ° JACKPOT!!! ðŸŽ°ðŸŽ°ðŸŽ°

ðŸ† Winner: @username
ðŸ’° Jackpot Pool: 150,000 TAMA
ðŸ’Ž Total Win: 160,000 TAMA
ðŸŽ² Bet: 2,000 TAMA

ðŸ”¥ Pool has been reset to 0!
ðŸŽ° Play now to build it up again!

ðŸ’¸ Use /slots to play
```

---

## âœ… Ð§Ð•ÐšÐ›Ð˜Ð¡Ð¢

- [ ] `BOT_WEBHOOK_URL` ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð² Railway (API)
- [ ] Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½
- [ ] Endpoint `/game-alerts` ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð² Ð±Ð¾Ñ‚Ðµ
- [ ] `CHANNEL_USERNAME` Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð² Ð±Ð¾Ñ‚Ðµ
- [ ] Ð‘Ð¾Ñ‚ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ ÐºÐ°Ð½Ð°Ð»Ð°
- [ ] Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ ÑÐ¿Ð¸Ð½ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐµÐ¼ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ð» ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ

---

## ðŸš€ Ð“ÐžÐ¢ÐžÐ’Ðž!

Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ñ€Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐ°Ñ… Ð² ÑÐ»Ð¾Ñ‚Ð°Ñ… Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð±ÑƒÐ´ÑƒÑ‚ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð² ÐºÐ°Ð½Ð°Ð».

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ:** Ð¡Ð´ÐµÐ»Ð°Ð¹ ÑÐ¿Ð¸Ð½ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÑÑ‚Ð°Ð²ÐºÐ¾Ð¹ Ð¸ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ x10+ Ð¸Ð»Ð¸ >= 50,000 TAMA.

