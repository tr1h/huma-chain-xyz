services:
  # API Service (PHP + Apache)
  - type: web
    name: huma-chain-xyz-api
    env: docker
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: free
    healthCheckPath: /api/test.php
    envVars:
      - key: SUPABASE_URL
        value: https://zfrazyupameidxpjihrh.supabase.co
      - key: SUPABASE_KEY
        sync: false
      - key: TAMA_MINT_ADDRESS
        value: Fuqw8Zg17XhHGXfghLYD1fqjxJa1PnmG2MmoqG5pcmLY
      - key: SOLANA_RPC_URL
        value: https://api.devnet.solana.com
      - key: SOLANA_PAYER_KEYPAIR
        sync: false
      - key: SOLANA_P2E_POOL_KEYPAIR
        sync: false

  # Bot Service (Python Web Service - Webhook Mode)
  - type: web
    name: huma-chain-xyz-bot
    env: python
    region: oregon
    plan: free
    buildCommand: pip install -r bot/requirements.txt
    startCommand: cd bot && python bot.py
    healthCheckPath: /
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: BOT_USERNAME
        value: GotchiGameBot
      - key: GAME_URL
        value: https://tr1h.github.io/huma-chain-xyz/tamagotchi-game.html?v=20251108
      - key: RENDER_EXTERNAL_HOSTNAME
        fromService:
          type: web
          name: huma-chain-xyz-bot
          property: host
      - key: RENDER
        value: "true"
      - key: MINT_URL
        value: https://tr1h.github.io/huma-chain-xyz/
      - key: CHANNEL_USERNAME
        value: "@GotchiGame"
      - key: MENU_BUTTON_TEXT
        value: "ðŸŽ® Gotchi Game"
      - key: GROUP_ID
        value: "-1002938566588"
      - key: ADMIN_IDS
        value: "7401131043"
      - key: EXEMPT_GROUP_IDS
        value: "-1002938566588"
      - key: TAMA_API_BASE
        value: https://huma-chain-xyz.onrender.com/api/tama
      - key: SUPABASE_URL
        value: https://zfrazyupameidxpjihrh.supabase.co
      - key: SUPABASE_KEY
        sync: false

