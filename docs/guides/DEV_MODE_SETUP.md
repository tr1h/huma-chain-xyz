# üîß DEV MODE SETUP

## –ü—Ä–æ–±–ª–µ–º–∞: 403 Forbidden –ø—Ä–∏ –∏–≥—Ä–µ —á–µ—Ä–µ–∑ Telegram Desktop –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä

–ï—Å–ª–∏ –∏–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ—à–∏–±–∫—É "Authentication failed" –ø—Ä–∏ –∏–≥—Ä–µ —á–µ—Ä–µ–∑:

- Telegram Desktop (–∫–æ–º–ø—å—é—Ç–µ—Ä)
- –ü—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- Telegram Web

## –†–µ—à–µ–Ω–∏–µ: –í–∫–ª—é—á–∏—Ç—å DEV MODE –Ω–∞ API

### 1. –ó–∞–π–¥–∏ –≤ Render (API)

URL: https://render.com/

–ù–∞–π–¥–∏ —Å–µ—Ä–≤–∏—Å: `tr1h/huma-chain-xyz` (API)

### 2. –£–¥–∞–ª–∏ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π `BOT_TOKEN`

–í **Environment Variables**:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é**

```
BOT_TOKEN = [—É–¥–∞–ª–∏—Ç—å]
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)**

```
BOT_TOKEN_DISABLED = YOUR_BOT_TOKEN_HERE
```

### 3. –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç API.

---

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?

### –° `BOT_TOKEN` (Production Mode):

- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `initData`
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Telegram Desktop
- ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–∫–∏ `user_id`

### –ë–µ–∑ `BOT_TOKEN` (DEV Mode):

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ (Desktop, Web, Mobile)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π
- ‚ö†Ô∏è –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `initData`
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `user_id` –≤ URL (–Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∏–≥—Ä—ã)

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç–∞–¥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: DEV MODE (–±–µ–∑ `BOT_TOKEN`)**

–ü—Ä–∏—á–∏–Ω—ã:

1. –ò–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –∏–≥—Ä–∞—Ç—å —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. –ù–µ –º–µ—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
3. –ù–∞–∫—Ä—É—Ç–∫–∞ `user_id` –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–Ω–µ—Ç –≤—ã–≤–æ–¥–∞ –¥–µ–Ω–µ–≥)
4. –õ–µ–≥—á–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–µ–Ω—å–≥–∞–º–∏:**

- –í–∫–ª—é—á–∏—Ç—å `BOT_TOKEN`
- –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram Mobile App

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞

–°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ API:

### DEV MODE:

```
‚ö†Ô∏è BOT_TOKEN not set - skipping auth validation (DEV MODE)
```

### PRODUCTION MODE:

```
‚úÖ Telegram auth validated for user: 202140267
```

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Dual Mode

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π env variable –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è:

```
AUTH_MODE=dev  # dev –∏–ª–∏ production
BOT_TOKEN=YOUR_BOT_TOKEN_HERE
```

–í `api/telegram_auth.php`:

```php
$authMode = getenv('AUTH_MODE') ?: 'dev';
if ($authMode === 'dev') {
    // Skip validation
} else {
    // Validate initData
}
```

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

–ò–≥—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ **–ª—é–±–æ–º —Ä–µ–∂–∏–º–µ**:

- –ï—Å–ª–∏ API –≤–µ—Ä–Ω–µ—Ç 403 ‚Üí fallback –Ω–∞ –ø—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Supabase
- –ï—Å–ª–∏ `initData` –ø—É—Å—Ç–æ–π ‚Üí –ø—Ä–æ—Å—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è gracefully

**–†–µ–∫–æ–º–µ–Ω–¥—É—é: —É–¥–∞–ª–∏—Ç—å `BOT_TOKEN` –Ω–∞ Render –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.**
