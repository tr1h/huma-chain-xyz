# üö® –û–¢–ß–Å–¢: –°–†–û–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–î–∞—Ç–∞:** 20 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º—ã:** 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

---

## 1. ‚ùå –ö—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤ Legal Disclaimer (–ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —ç–º–æ–¥–∑–∏ –≤ —Ñ–∞–π–ª–µ `js/legal-consent.js`:
- `–≤—ô –ø—ë–è` –≤–º–µ—Å—Ç–æ `‚ö†Ô∏è`
- `—Ä—ü—ô–Å` –≤–º–µ—Å—Ç–æ `üö®`
- `–≤–Ç"` –≤–º–µ—Å—Ç–æ `‚Äî`
- `—Ä—ü"'` –≤–º–µ—Å—Ç–æ `üîí`

**–°—Ç–∞—Ç—É—Å:** 1 –∏–∑ 5 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–æ (‚öñÔ∏è Terms of Service)

**–†–µ—à–µ–Ω–∏–µ:**
–§–∞–π–ª –∏–º–µ–µ—Ç BOM (byte order mark) –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É. –ù—É–∂–Ω–æ:

1. **–í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ VS Code:**
   ```
   1. –û—Ç–∫—Ä—ã—Ç—å js/legal-consent.js –≤ VS Code
   2. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 42: `<h2>–≤—ô –ø—ë–è Important` ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `<h2>‚ö†Ô∏è Important`
   3. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 47: `<p><strong>—Ä—ü—ô–Å THIS IS A GAME–≤–Ç"NOT` ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `<p><strong>üö® THIS IS A GAME‚ÄîNOT`
   4. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 60: `<a href="/privacy" target="_blank">—Ä—ü"' Privacy` ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `<a href="/privacy" target="_blank">üîí Privacy`
   5. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 64: `<a href="/disclaimer" target="_blank">–≤—ô –ø—ë–è Risk` ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `<a href="/disclaimer" target="_blank">‚ö†Ô∏è Risk`
   6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ UTF-8 –±–µ–∑ BOM (File ‚Üí Save with Encoding ‚Üí UTF-8)
   ```

2. **–ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —ç–º–æ–¥–∑–∏:**
   ```
   - "Important: Please Read" (–±–µ–∑ ‚ö†Ô∏è)
   - "THIS IS A GAME‚ÄîNOT AN INVESTMENT" (–±–µ–∑ üö®)
   - "Terms of Service" (–±–µ–∑ ‚öñÔ∏è) 
   - "Privacy Policy" (–±–µ–∑ üîí)
   - "Risk Warning" (–±–µ–∑ ‚ö†Ô∏è)
   ```

---

## 2. ‚ùå Supabase 401 Unauthorized Error (–ö–†–ò–¢–ò–ß–ù–û)

**–û—à–∏–±–∫–∞:**
```
Failed to load resource: the server responded with a status of 401
zfrazyupameidxpjihrh.supabase.co/rest/v1/leaderboard?telegram_id=eq.2139640084
```

**–ü—Ä–∏—á–∏–Ω–∞:**
RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø.

**–†–µ—à–µ–Ω–∏–µ:**

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase Dashboard

1. –û—Ç–∫—Ä—ã—Ç—å https://supabase.com/dashboard/project/zfrazyupameidxpjihrh
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Authentication ‚Üí Policies**
3. –ù–∞–π—Ç–∏ —Ç–∞–±–ª–∏—Ü—É `leaderboard`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ —Ç–∏–ø–∞:

```sql
-- Allow anonymous read access
CREATE POLICY "Allow public read"
ON leaderboard
FOR SELECT
TO anon
USING (true);

-- Allow authenticated insert/update
CREATE POLICY "Allow authenticated write"
ON leaderboard
FOR ALL
TO authenticated
USING (true);
```

5. –ï—Å–ª–∏ –ø–æ–ª–∏—Ç–∏–∫ –Ω–µ—Ç ‚Üí —Å–æ–∑–¥–∞—Ç—å –∏—Ö
6. –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω–∏ enabled (–≤–∫–ª—é—á–µ–Ω—ã)

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –û—Ç–∫–ª—é—á–∏—Ç—å RLS (–¢–û–õ–¨–ö–û –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò!)

```sql
-- –í SQL Editor Supabase
ALTER TABLE leaderboard DISABLE ROW LEVEL SECURITY;
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
ALTER TABLE pets DISABLE ROW LEVEL SECURITY;
```

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –û—Ç–∫–ª—é—á–∞—Ç—å RLS –Ω–∞ production –æ–ø–∞—Å–Ω–æ! –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

### –í–∞—Ä–∏–∞–Ω—Ç –í: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Role Key

–í `js/config.js` –∑–∞–º–µ–Ω–∏—Ç—å anon key –Ω–∞ service_role key (–¢–û–õ–¨–ö–û –î–õ–Ø BACKEND!):

```javascript
// –í–ù–ò–ú–ê–ù–ò–ï: Service role key –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø!
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û –Ω–∞ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º backend!
SUPABASE_KEY: '–¢–í–û–ô_SERVICE_ROLE_KEY'
```

---

## 3. ‚úÖ –ö–Ω–æ–ø–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ò–°–ü–†–ê–í–õ–ï–ù–û)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ `pet-area` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –∫–ª–∏–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–µ –º–∞–≥–∞–∑–∏–Ω–∞.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –≤ –∫–æ–º–º–∏—Ç–µ `6c6738b`

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
- –£–≤–µ–ª–∏—á–µ–Ω z-index –¥–æ 1100
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–î–µ–ø–ª–æ–π:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub
- –ù—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

---

## üìã –ß–¢–û –î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°:

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Supabase 401 (–ë–õ–û–ö–ò–†–£–ï–¢ –ò–ì–†–£!)

1. –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü: `leaderboard`, `users`, `pets`
3. –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É "Allow public read"
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∏–≥—Ä–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ö—Ä–∞–∫–æ–∑—è–±—Ä—ã (–ü–ª–æ—Ö–æ–π UX)

1. –û—Ç–∫—Ä—ã—Ç—å `js/legal-consent.js` –≤ VS Code
2. –í—Ä—É—á–Ω—É—é –∑–∞–º–µ–Ω–∏—Ç—å 4 –∫—Ä–∞–∫–æ–∑—è–±—Ä–∞ –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —ç–º–æ–¥–∑–∏ (—Å–º. –≤—ã—à–µ)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ UTF-8 –±–µ–∑ BOM
4. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ö–Ω–æ–ø–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ (–£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–µ–ø–ª–æ–∏–ª–∏—Å—å
2. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É üõí

---

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å:
```bash
git pull origin main
git log --oneline -3
```

### –ö–æ–º–º–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```bash
git add js/legal-consent.js
git commit -m "fix: correct emoji encoding in legal disclaimer modal"
git push origin main
```

### –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ —Å–∞–π—Ç–∞:
- Chrome/Edge: Ctrl+Shift+Delete ‚Üí Clear cache
- –ò–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –æ–∫–Ω–µ (Ctrl+Shift+N)

---

## üìû –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:

1. **Supabase RLS:** –ü–æ—Å–º–æ—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é https://supabase.com/docs/guides/auth/row-level-security
2. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤:** –ò—Å–ø–æ–ª—å–∑—É–π VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º "Fix All JSON" –∏–ª–∏ "Change Encoding"
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Console –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫

---

**–°–æ—Å—Ç–∞–≤–ª–µ–Ω–æ:** @Security + @UI-UX Droids  
**–¢—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase)
