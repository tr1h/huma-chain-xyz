# 🎰 JACKPOT ALERTS - СИСТЕМА УВЕДОМЛЕНИЙ

## ✅ ЧТО РЕАЛИЗОВАНО:

### 1. **Jackpot Alerts** 🎰🎰🎰
- При выигрыше джекпота → сообщение в канал + группу
- Личное поздравление победителю
- Показывает: сумму джекпота, общий выигрыш, ставку

### 2. **Big Win Alerts** 🎉
- При выигрыше x20+ → сообщение в канал
- Показывает: сумму, множитель, символы
- Не спамит группу (только канал)

### 3. **Автоматическая отправка**
- Бот автоматически постит при выигрыше
- Работает из slots.html (WebApp)
- Работает из бота (inline кнопки)

---

## 🚀 КАК РАБОТАЕТ:

### Сценарий 1: Джекпот выигран 🎰🎰🎰

```
1. Игрок крутит слоты
2. Выпадает 🎰🎰🎰
3. Бот АВТОМАТИЧЕСКИ постит:

📢 В КАНАЛ (@GotchiGame):
🎰🎰🎰 JACKPOT WIN!!! 🎰🎰🎰
🏆 Winner: @username
💰 Jackpot Pool: 50,000 TAMA
💎 Total Win: 150,000 TAMA
🎲 Bet: 2,000 TAMA
🔥 Pool has been reset to 0!
🎰 Play now: /slots

📢 В ГРУППУ (@gotchigamechat):
(то же сообщение)

📢 ПОБЕДИТЕЛЮ (лично):
🎰🎰🎰 CONGRATULATIONS!!! 🎰🎰🎰
You just won the JACKPOT! 🔥
💰 Jackpot: 50,000 TAMA
💎 Total Win: 150,000 TAMA
🎲 Your Bet: 2,000 TAMA
```

### Сценарий 2: Крупный выигрыш (x20+) 🎉

```
1. Игрок выигрывает x20 или больше
2. Бот постит В КАНАЛ:

🎉 BIG WIN! 🎉
🏆 @username
💎💎💎
💰 Won: 10,000 TAMA (x20)
🎰 Try your luck: /slots
```

---

## 🔧 НАСТРОЙКА:

### 1. Убедись, что бот добавлен в канал и группу:

```
Канал: @GotchiGame
Группа: @gotchigamechat (ID: -1002938566588)
```

### 2. Дай боту права администратора:

**В канале:**
- ✅ Post messages
- ✅ Edit messages

**В группе:**
- ✅ Send messages
- ✅ Delete messages (опционально)

### 3. Проверь переменные окружения в bot.py:

```python
CHANNEL_USERNAME = '@GotchiGame'
GROUP_ID = -1002938566588
```

---

## 🎮 КАК ПРОТЕСТИРОВАТЬ:

### Тест 1: Джекпот в боте

```bash
1. Открой бота в Telegram
2. /slots
3. Выбери ставку (100/500/2000)
4. Если выпадет 🎰🎰🎰 → алерт в канал!
```

### Тест 2: Джекпот в WebApp

```bash
1. Открой https://solanatamagotchi.com/slots.html
2. Сделай ставку
3. Если выпадет 🎰🎰🎰 → алерт в канал!
```

### Тест 3: Крупный выигрыш

```bash
1. Играй до выигрыша x20+
2. Алерт появится в канале
```

---

## 📊 ГДЕ СМОТРЕТЬ СТАТИСТИКУ:

### Supabase → SQL Editor:

```sql
-- Все джекпоты:
SELECT * FROM slots_jackpot_history
ORDER BY won_at DESC;

-- Текущий пул:
SELECT current_pool, total_contributed, total_won, wins_count
FROM slots_jackpot_pool
WHERE id = 1;

-- Все транзакции слотов:
SELECT * FROM transactions
WHERE type IN ('slots_bet', 'slots_win')
ORDER BY created_at DESC
LIMIT 50;
```

---

## 🔥 ЭФФЕКТ:

### Что это даст:

1. **FOMO эффект** 🚀
   - Люди видят выигрыши → хотят играть
   - Создает ажиотаж в чате

2. **Социальное доказательство** ✅
   - "Смотри, люди реально выигрывают!"
   - Увеличивает доверие к игре

3. **Вирусность** 📈
   - Каждый алерт → реклама игры
   - Люди делятся с друзьями

4. **Активность в чате** 💬
   - Обсуждения выигрышей
   - Поздравления победителям

---

## 🎯 СЛЕДУЮЩИЕ ШАГИ:

### Фаза 2 (опционально):

1. **Turbo Tournaments** - 5-минутные турниры
2. **Community Spins** - совместные спины
3. **Hot Streak Contest** - серии выигрышей
4. **Weekly Jackpot Leaderboard** - топ победителей недели

---

## 🐛 TROUBLESHOOTING:

### Алерты не приходят:

1. **Проверь права бота:**
   ```
   Канал → Administrators → Добавь бота
   Группа → Administrators → Добавь бота
   ```

2. **Проверь ID группы:**
   ```python
   # В bot.py:
   GROUP_ID = -1002938566588  # Должен быть правильный
   ```

3. **Проверь логи бота:**
   ```bash
   # В терминале где запущен бот:
   ✅ Jackpot alert sent to channel: @GotchiGame
   ✅ Jackpot alert sent to group: -1002938566588
   ```

### Бот не может постить:

```
Error: Forbidden: bot is not a member of the channel
Решение: Добавь бота в канал как администратора
```

---

## 🎉 ГОТОВО!

Теперь каждый джекпот и крупный выигрыш будет автоматически постится в канал и группу! 🔥

**Запускай и наблюдай, как растет активность!** 🚀

