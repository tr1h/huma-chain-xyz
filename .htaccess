# Enable Rewrite Engine
RewriteEngine On

# Route API requests to tama_supabase.php
# CRITICAL: Skip tama_supabase.php itself to prevent redirect loop!
RewriteCond %{REQUEST_URI} ^/api/tama
RewriteCond %{REQUEST_URI} !tama_supabase\.php$
RewriteRule ^api/tama(.*)$ /api/tama_supabase.php [QSA,L]

# Route other API requests (but skip real PHP files like test.php)
RewriteCond %{REQUEST_URI} ^/api/
RewriteCond %{REQUEST_URI} !tama_supabase\.php$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api/(.*)$ /api/tama_supabase.php [QSA,L]

# Set default charset
AddDefaultCharset UTF-8

# Disable directory listing
Options -Indexes

# CORS headers are handled in PHP (api/tama_supabase.php)
# to avoid duplicate headers conflict

