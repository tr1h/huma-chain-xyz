# Enable Rewrite Engine
RewriteEngine On

# Route /api/tama/* requests to tama_supabase.php
# CRITICAL: Skip tama_supabase.php itself to prevent redirect loop!
RewriteCond %{REQUEST_URI} ^/api/tama
RewriteCond %{REQUEST_URI} !tama_supabase\.php$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/tama(.*)$ api/tama_supabase.php [QSA,L]

# Route /api/test.php to test.php (if exists)
RewriteCond %{REQUEST_URI} ^/api/test\.php$
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^api/test\.php$ /api/test.php [L]

# Set default charset
AddDefaultCharset UTF-8

# Disable directory listing
Options -Indexes

# CORS headers are handled in PHP (api/tama_supabase.php)
# to avoid duplicate headers conflict

