# üß™ @QA-Tester: Bot Spam Protection Test Cases

**–î–∞—Ç–∞:** 2025-12-18  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** @QA-Tester  
**–ë–∞–∑–æ–≤—ã–π –æ—Ç—á—ë—Ç:** `.INTEGRATIONS_BOT_AUDIT_REPORT.md`  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã spam protection –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìã TEST PLAN OVERVIEW

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 47 test cases  
**–ö–∞—Ç–µ–≥–æ—Ä–∏–π:** 10  
**Estimated time:** 4-6 —á–∞—Å–æ–≤ (manual testing)  

**Test environments:**
- ‚úÖ Telegram –≥—Ä—É–ø–ø–∞: @gotchigamechat (-1002938566588)
- ‚úÖ Telegram –±–æ—Ç: @GotchiGameBot
- ‚úÖ Admin IDs: 7401131043, 202140267
- ‚úÖ Test user: (—Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)

---

## üéØ TEST CATEGORIES

1. **Admin Spam Protection** (10 tests)
2. **Auto-posting Protection** (6 tests)
3. **Regular User Spam Detection** (8 tests)
4. **FAQ Handler** (7 tests)
5. **Rate Limiting** (5 tests)
6. **Banned Words** (4 tests)
7. **Monitoring Alerts** (3 tests)
8. **Bot Self-messages** (2 tests)
9. **Whitelist System** (AFTER implementation) (2 tests)
10. **Role-based Permissions** (AFTER implementation) (0 tests - future)

---

## TEST CATEGORY 1: Admin Spam Protection üõ°Ô∏è

### TC-001: Admin High Frequency Messages
**Priority:** üî¥ CRITICAL  
**Type:** Manual  
**Pre-requisites:** Logged in as Admin (7401131043)

**Steps:**
1. –û—Ç–∫—Ä—ã—Ç—å @gotchigamechat
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å 10 —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥ –∑–∞ 5 —Å–µ–∫—É–Ω–¥:
   ```
   Test 1
   Test 2
   Test 3
   ...
   Test 10
   ```

**Expected Result:**
- ‚úÖ –í—Å–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ù–ï–¢ warning "‚ö†Ô∏è slow down! Anti-spam protection"
- ‚úÖ –ù–ï–¢ admin alert –≤ –ª–∏—á–∫—É –æ high request rate
- ‚úÖ Console log: "‚úÖ Admin message ignored: 7401131043"

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-002: Admin Partnership Message
**Priority:** üî¥ CRITICAL  
**Type:** Manual  

**Steps:**
1. –û—Ç–∫—Ä—ã—Ç—å @gotchigamechat
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   Looking for partnership opportunities with other Solana projects
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ FAQ auto-response –æ partnership
- ‚úÖ –ù–ï–¢ admin alert "üö® SPAM DETECTED"
- ‚úÖ Console log: "‚úÖ Admin message ignored"

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-003: Admin AMA Message
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É:
   ```
   Planning an AMA session next week!
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ FAQ auto-response
- ‚úÖ –ù–ï–¢ spam alert

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-004: Admin URL in Message
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   Check out https://solanatamagotchi.com for updates!
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ blocking
- ‚úÖ –ù–ï–¢ "banned words" warning

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-005: Admin Multiple URLs
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   Links:
   https://solanatamagotchi.com
   https://twitter.com/GotchiGame
   https://t.me/GotchiGameBot
   http://example.com
   ```

**Expected Result:**
- ‚úÖ –í—Å–µ —Å—Å—ã–ª–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ù–ï–¢ blocking

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-006: Admin Rapid Commands
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –í –ª–∏—á–∫–µ —Å –±–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä–æ:
   ```
   /monitor
   /stats
   /health
   /players
   /economy
   ```

**Expected Result:**
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –ù–ï–¢ rate limiting
- ‚úÖ –ù–ï–¢ "slow down" warning

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-007: Admin Message with "spam" Word
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É:
   ```
   Please don't spam the chat, everyone!
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ auto-delete
- ‚úÖ –ù–ï–¢ warning

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-008: Admin Message with "scam" Word
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   Watch out for scam projects, only trust official links!
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ blocking

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-009: Second Admin Same Tests
**Priority:** üü° HIGH  
**Type:** Manual  
**Pre-requisites:** Logged in as Admin 2 (202140267)

**Steps:**
1. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å TC-001 –¥–æ TC-008 –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∞

**Expected Result:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã pass –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –∞–¥–º–∏–Ω–∞ —Ç–æ–∂–µ

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-010: Non-Admin Same Tests (Control)
**Priority:** üî¥ CRITICAL  
**Type:** Manual  
**Pre-requisites:** Test user (NOT admin)

**Steps:**
1. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å TC-001, TC-002, TC-004
2. –ù–æ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**Expected Result:**
- ‚ùå TC-001: Spam warning –ø–æ—Å–ª–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚ùå TC-002: FAQ auto-response –æ partnership
- ‚ùå TC-004: (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç has_banned_words implementation)

**Actual Result:**
- [ ] Pass (spam protection —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —é–∑–µ—Ä–æ–≤)
- [ ] Fail (describe):

---

## TEST CATEGORY 2: Auto-posting Protection ü§ñ

### TC-011: Test Daily Promo Command
**Priority:** üî¥ CRITICAL  
**Type:** Manual  
**Pre-requisites:** Admin access

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É –≤ –ª–∏—á–∫—É:
   ```
   /test_daily_promo
   ```

**Expected Result:**
- ‚úÖ –ü–æ—Å—Ç –ø–æ—è–≤–∏–ª—Å—è –≤ –∫–∞–Ω–∞–ª–µ @GotchiGame
- ‚úÖ –ù–ï–¢ spam detection –≤ –ª–æ–≥–∞—Ö
- ‚úÖ Console: "‚úÖ Posted to @GotchiGame"

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-012: Daily Analytics Report
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   /daily_report
   ```
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–ø–æ—Ä—Ç–∞ –≤ –ª–∏—á–∫—É

**Expected Result:**
- ‚úÖ –†–µ–ø–æ—Ä—Ç –ø–æ–ª—É—á–µ–Ω
- ‚úÖ Formatting –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (Markdown)
- ‚úÖ –ù–ï–¢ spam alert –∞–¥–º–∏–Ω–∞–º
- ‚úÖ –ù–ï–¢ rate limiting

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-013: Weekly Analytics Report
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   /weekly_report
   ```

**Expected Result:**
- ‚úÖ –†–µ–ø–æ—Ä—Ç –ø–æ–ª—É—á–µ–Ω
- ‚úÖ –ù–ï–¢ spam detection

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-014: Multiple Bot Posts Rapid Fire
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥—Ä—è–¥:
   ```
   /test_daily_promo
   /test_daily_promo
   /test_daily_promo
   /test_daily_promo
   /test_daily_promo
   ```

**Expected Result:**
- ‚úÖ –í—Å–µ 5 –ø–æ—Å—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –∫–∞–Ω–∞–ª
- ‚úÖ –ù–ï–¢ "slow down" blocking
- ‚úÖ –ù–ï–¢ spam detection

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-015: Auto-posting Schedule Check
**Priority:** üü¢ MEDIUM  
**Type:** Observation  
**Duration:** 24 hours

**Steps:**
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª @GotchiGame –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
2. –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç auto-posts

**Expected Result:**
- ‚úÖ –ü–æ—Å—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –ù–ï–¢ spam warnings
- ‚úÖ –ù–ï–¢ duplicate posts

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-016: Bot Self-message Detection
**Priority:** üî¥ CRITICAL  
**Type:** Code Review + Manual

**Steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–¥–µ bot.py —Å—Ç—Ä–æ–∫—É 724:
   ```python
   if message.from_user.is_bot:
       print(f"‚úÖ Bot message ignored (is_bot=True)")
       return
   ```
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å /test_daily_promo
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å console logs

**Expected Result:**
- ‚úÖ –ö–æ–¥ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ Console –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚úÖ Bot message ignored"
- ‚úÖ handle_group_message() –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç bot messages

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 3: Regular User Spam Detection üë§

### TC-017: User High Frequency (6 messages)
**Priority:** üî¥ CRITICAL  
**Type:** Manual  
**Pre-requisites:** Test user (NOT admin)

**Steps:**
1. Logged in as test user
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å 6 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ 5 —Å–µ–∫—É–Ω–¥ –≤ –≥—Ä—É–ø–ø—É

**Expected Result:**
- ‚úÖ –ü–µ—Ä–≤—ã–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚ùå –ü–æ—Å–ª–µ 6-–≥–æ: "‚ö†Ô∏è [Username], slow down! Anti-spam protection."

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-018: User Partnership Keyword
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. Test user –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ```
   I have a partnership proposal for the team
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ FAQ auto-response –ø–æ–ª—É—á–µ–Ω:
   ```
   üìß **PARTNERSHIP INQUIRIES**
   
   Thank you for your interest!
   
   For business partnerships and collaborations, please email:
   ‚úâÔ∏è gotchigame@proton.me
   ...
   ```
- ‚úÖ Admin alert –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: "üö® SPAM DETECTED in @gotchigamechat"

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-019: User AMA Keyword
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. Test user –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ```
   Can we organize an AMA?
   ```

**Expected Result:**
- ‚úÖ FAQ auto-response
- ‚úÖ Admin alert

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-020: User "How to earn" FAQ
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. Test user –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ```
   How can I earn TAMA?
   ```

**Expected Result:**
- ‚úÖ FAQ auto-response —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ earning
- ‚úÖ –ù–ï–¢ spam alert (—ç—Ç–æ FAQ, –Ω–µ spam)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-021: User "What is TAMA" FAQ
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   What is TAMA token?
   ```

**Expected Result:**
- ‚úÖ FAQ auto-response —Å info –æ TAMA

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-022: User Random Message (No FAQ Match)
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   Hello everyone! Having a great day!
   ```

**Expected Result:**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ –ù–ï–¢ FAQ response
- ‚úÖ –ù–ï–¢ spam warning (–µ—Å–ª–∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç rate limit)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-023: User Spam Window Reset
**Priority:** üü° HIGH  
**Type:** Manual + Timing

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å 5 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ 5 —Å–µ–∫—É–Ω–¥
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 11 —Å–µ–∫—É–Ω–¥ (SPAM_WINDOW = 10 sec)
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â—ë 5 —Å–æ–æ–±—â–µ–Ω–∏–π

**Expected Result:**
- ‚úÖ –ü–µ—Ä–≤—ã–µ 5: OK
- ‚úÖ Wait 11 seconds
- ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ 5: OK (window reset)
- ‚úÖ –ù–ï–¢ spam warning

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-024: User Muted (if applicable)
**Priority:** üü¢ MEDIUM  
**Type:** Manual  
**Pre-requisites:** Test user muted by admin

**Steps:**
1. Admin mutes test user
2. Test user –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**Expected Result:**
- ‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- ‚úÖ Console: "User is muted"

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 4: FAQ Handler üìö

### TC-025: FAQ Language Detection (English)
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. Test user –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ```
   How to earn tokens?
   ```

**Expected Result:**
- ‚úÖ Response –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-026: FAQ Language Detection (Russian)
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   –ö–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–∫–µ–Ω—ã?
   ```

**Expected Result:**
- ‚úÖ Response –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-027: FAQ Multiple Keywords Match
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   How to earn TAMA and what is the token?
   ```

**Expected Result:**
- ‚úÖ Best match response (—Ç–æ—Ç FAQ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º keyword matches)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-028: FAQ Case Insensitivity
**Priority:** üü¢ MEDIUM  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   HOW TO EARN TAMA?
   ```

**Expected Result:**
- ‚úÖ FAQ response (case-insensitive)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-029: FAQ in Private Chat
**Priority:** üü¢ MEDIUM  
**Type:** Manual

**Steps:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª–∏—á–∫—É —Å –±–æ—Ç–æ–º
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å:
   ```
   How to earn?
   ```

**Expected Result:**
- ‚ùå –ù–ï–¢ FAQ response (FAQ —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö?)
- OR
- ‚úÖ FAQ response —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ –ª–∏—á–∫–µ

**Note:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config FAQ_ENABLED –¥–ª—è private chats

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-030: FAQ Default Response
**Priority:** üü¢ MEDIUM  
**Type:** Manual

**Steps:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –ù–ï matching –Ω–∏–∫–∞–∫–∏–µ keywords:
   ```
   asdfghjkl qwerty
   ```

**Expected Result:**
- ‚úÖ Default response (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ faq_data.json)
- OR
- ‚úÖ –ù–ï–¢ response (–µ—Å–ª–∏ default disabled)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-031: FAQ Markdown Formatting
**Priority:** üü¢ MEDIUM  
**Type:** Manual

**Steps:**
1. Trigger –ª—é–±–æ–π FAQ response
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Expected Result:**
- ‚úÖ **Bold** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ *Italic* —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Å—ã–ª–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã
- ‚úÖ Emoji –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 5: Rate Limiting ‚è±Ô∏è

### TC-032: User Exact Limit (5 messages in 10 sec)
**Priority:** üî¥ CRITICAL  
**Type:** Manual + Stopwatch

**Steps:**
1. Test user
2. Send exactly 5 messages in 9 seconds
3. Wait 2 seconds
4. Send 6th message

**Expected Result:**
- ‚úÖ First 5: OK
- ‚úÖ 6th (within window): Spam warning
- OR
- ‚úÖ 6th (after window): OK

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-033: Rate Limit Constants Check
**Priority:** üü¢ MEDIUM  
**Type:** Code Review

**Steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å bot.py —Å—Ç—Ä–æ–∫–∏ 219-222:
   ```python
   SPAM_LIMIT = 5  # messages
   SPAM_WINDOW = 10  # seconds
   ```

**Expected Result:**
- ‚úÖ SPAM_LIMIT = 5
- ‚úÖ SPAM_WINDOW = 10

**Actual Result:**
- [ ] Pass (values correct)
- [ ] Fail (values different):

---

### TC-034: Multiple Users Rate Limiting
**Priority:** üü° HIGH  
**Type:** Manual  
**Pre-requisites:** 2 test users

**Steps:**
1. User A: Send 5 messages
2. User B: Send 5 messages
3. User A: Send 6th message

**Expected Result:**
- ‚úÖ User A: 5 OK, 6th = spam warning
- ‚úÖ User B: 5 OK (independent counter)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-035: Rate Limit Dictionary Cleanup
**Priority:** üü¢ MEDIUM  
**Type:** Code Review

**Steps:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å check_spam() —Ñ—É–Ω–∫—Ü–∏—é:
   ```python
   user_messages[user_id] = [msg_time for msg_time in user_messages[user_id] if now - msg_time < SPAM_WINDOW]
   ```

**Expected Result:**
- ‚úÖ –°—Ç–∞—Ä—ã–µ timestamps —É–¥–∞–ª—è—é—Ç—Å—è
- ‚úÖ –ù–µ—Ç memory leak

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-036: Admin Bypass Rate Limit
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. Admin: Send 20 messages in 5 seconds

**Expected Result:**
- ‚úÖ All 20 sent
- ‚úÖ –ù–ï–¢ spam warning
- ‚úÖ check_spam() –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è (return —Ä–∞–Ω—å—à–µ)

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 6: Banned Words üö´

### TC-037: has_banned_words() Function Exists
**Priority:** üü° HIGH  
**Type:** Code Review

**Steps:**
1. Grep for "has_banned_words" in bot.py
2. Check if function is called anywhere

**Expected Result:**
- ‚úÖ Function defined (lines 708-712)
- ‚ùå Function NOT called (dead code)

**Actual Result:**
- [ ] Pass (dead code confirmed)
- [ ] Fail (function IS used - –≥–¥–µ?):

---

### TC-038: BANNED_WORDS List
**Priority:** üü¢ MEDIUM  
**Type:** Code Review

**Steps:**
1. Check bot.py line 225:
   ```python
   BANNED_WORDS = ['spam', 'scam', 'http://', 'https://']
   ```

**Expected Result:**
- ‚úÖ List exists
- ‚ö†Ô∏è Note: Very aggressive (blocks ALL links)

**Actual Result:**
- [ ] Pass
- [ ] Fail (list different):

---

### TC-039: Test "spam" Word (if implemented)
**Priority:** üü¢ MEDIUM  
**Type:** Manual  
**Pre-condition:** has_banned_words() IS implemented

**Steps:**
1. Test user sends:
   ```
   This is spam message
   ```

**Expected Result:**
- ‚ùå Message deleted
- ‚úÖ Warning: "contains prohibited content"

**Actual Result:**
- [ ] N/A (not implemented)
- [ ] Pass
- [ ] Fail (describe):

---

### TC-040: Test Links (if implemented)
**Priority:** üü¢ MEDIUM  
**Type:** Manual  
**Pre-condition:** has_banned_words() IS implemented

**Steps:**
1. Test user sends:
   ```
   Check http://example.com
   ```

**Expected Result:**
- ‚ùå Message deleted (because "http://" in BANNED_WORDS)

**Actual Result:**
- [ ] N/A (not implemented)
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 7: Monitoring Alerts üìä

### TC-041: Admin High Request Alert (BEFORE FIX)
**Priority:** üî¥ CRITICAL  
**Type:** Manual

**Steps:**
1. Admin sends 100 messages rapidly
2. Check admin's –ª–∏—á–∫—É for alerts

**Expected Result (BEFORE FIX):**
- ‚ùå BUG: Admin receives "‚ö†Ô∏è HIGH REQUEST RATE DETECTED" about themselves
- ‚ùå This is WRONG!

**Expected Result (AFTER FIX):**
- ‚úÖ NO alert (admin bypass)

**Actual Result:**
- [ ] Bug confirmed (before fix)
- [ ] Fixed (no alert)
- [ ] Other:

---

### TC-042: Regular User High Request Alert
**Priority:** üü° HIGH  
**Type:** Manual

**Steps:**
1. Test user makes 60+ requests in 1 minute
   (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ /start spam –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã)

**Expected Result:**
- ‚úÖ Admin receives alert:
   ```
   ‚ö†Ô∏è **HIGH REQUEST RATE DETECTED**
   
   User: [user_id]
   Requests this minute: 60+
   Action: [action]
   ```

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-043: Critical Error Alert
**Priority:** üü° HIGH  
**Type:** Observation

**Steps:**
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å admin alerts –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
2. –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å–µ critical error alerts

**Expected Result:**
- ‚úÖ Alerts –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ Format –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ Details –ø–æ–ª–µ–∑–Ω—ã–µ

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 8: Bot Self-messages ü§ñüí¨

### TC-044: Bot is_bot Check
**Priority:** üî¥ CRITICAL  
**Type:** Code Review + Log Check

**Steps:**
1. Check bot.py line 724:
   ```python
   if message.from_user.is_bot:
   ```
2. Trigger auto-post
3. Check console logs

**Expected Result:**
- ‚úÖ Check exists
- ‚úÖ Console: "‚úÖ Bot message ignored (is_bot=True)"
- ‚úÖ handle_group_message() exits early

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

### TC-045: Bot Username Check
**Priority:** üü° HIGH  
**Type:** Code Review

**Steps:**
1. Check bot.py line 738:
   ```python
   if message.from_user.username and message.from_user.username.lower() == 'gotchigamebot':
   ```

**Expected Result:**
- ‚úÖ Check exists
- ‚úÖ Extra safety layer

**Actual Result:**
- [ ] Pass
- [ ] Fail (describe):

---

## TEST CATEGORY 9: Whitelist System (AFTER IMPLEMENTATION) ‚ö™

### TC-046: Admin Whitelist Phrases (FUTURE)
**Priority:** üü¢ MEDIUM  
**Type:** Manual  
**Pre-condition:** FIX #3 implemented

**Steps:**
1. Admin sends message with whitelisted phrase
2. Check for spam detection

**Expected Result:**
- ‚úÖ Whitelisted phrases bypass ALL checks

**Actual Result:**
- [ ] N/A (not implemented yet)
- [ ] Pass
- [ ] Fail:

---

### TC-047: Whitelist Links (FUTURE)
**Priority:** üü¢ MEDIUM  
**Type:** Manual  
**Pre-condition:** Improved BANNED_WORDS with whitelist

**Steps:**
1. User sends official link:
   ```
   https://solanatamagotchi.com
   ```
2. User sends suspicious link:
   ```
   https://bit.ly/scam123
   ```

**Expected Result:**
- ‚úÖ Official link: OK
- ‚ùå Suspicious link: Blocked

**Actual Result:**
- [ ] N/A (not implemented yet)
- [ ] Pass
- [ ] Fail:

---

## üìä TEST EXECUTION MATRIX

### Phase 1: Pre-Fix Testing (CURRENT STATE)
**Goal:** Confirm bugs exist

| Test Case | Priority | Expected Result | Status |
|-----------|----------|-----------------|--------|
| TC-001 | üî¥ CRITICAL | Admin bypass works | ‚òê |
| TC-002 | üî¥ CRITICAL | Admin no FAQ | ‚òê |
| TC-017 | üî¥ CRITICAL | User spam detected | ‚òê |
| TC-018 | üî¥ CRITICAL | User FAQ works | ‚òê |
| TC-032 | üî¥ CRITICAL | Rate limit 5/10 | ‚òê |
| TC-041 | üî¥ CRITICAL | **BUG: Admin gets alert** | ‚òê |

**Expected bugs to find:**
- [ ] TC-041: Admin receives high request alert (WRONG!)
- [ ] TC-037: has_banned_words() not used (dead code)
- [ ] FAQ comment misleading (not a functional bug)

---

### Phase 2: Post-Fix Testing (AFTER @Developer fixes)
**Goal:** Confirm fixes work

| Test Case | Priority | Expected Result | Status |
|-----------|----------|-----------------|--------|
| TC-041 | üî¥ CRITICAL | NO admin alert | ‚òê |
| TC-001-010 | üî¥ CRITICAL | All admin tests pass | ‚òê |
| TC-011-016 | üî¥ CRITICAL | Auto-post works | ‚òê |
| TC-017-024 | üî¥ CRITICAL | User spam detection | ‚òê |

---

### Phase 3: Regression Testing
**Goal:** Ensure nothing broke

| Category | Tests | Status |
|----------|-------|--------|
| Admin Protection | TC-001 to TC-010 | ‚òê |
| Auto-posting | TC-011 to TC-016 | ‚òê |
| User Spam | TC-017 to TC-024 | ‚òê |
| FAQ Handler | TC-025 to TC-031 | ‚òê |
| Rate Limiting | TC-032 to TC-036 | ‚òê |

---

## üß™ AUTOMATED TESTING (Optional)

### Test Script Template

```python
"""
Automated tests for bot spam protection
Requires: pytest, python-telegram-bot
"""

import pytest
from bot import check_spam, is_admin, has_banned_words

class TestSpamProtection:
    def test_admin_bypass(self):
        """TC-001: Admin should bypass spam checks"""
        admin_id = 7401131043
        assert is_admin(admin_id) == True
    
    def test_user_spam_limit(self):
        """TC-017: User should hit spam limit at 6 messages"""
        user_id = 999999
        
        # Simulate 5 messages
        for i in range(5):
            assert check_spam(user_id) == False
        
        # 6th message should trigger spam
        assert check_spam(user_id) == True
    
    def test_banned_words_function(self):
        """TC-037: Check if has_banned_words is used"""
        # This test will fail if function is dead code
        text = "This is spam"
        result = has_banned_words(text)
        # If function raises NameError, it's not imported/used
        assert isinstance(result, bool)

# Run with: pytest test_bot_spam.py -v
```

---

## üìã TEST REPORT TEMPLATE

### Test Execution Summary

**Date:** [DATE]  
**Tester:** @QA-Tester  
**Environment:** Production / Staging  
**Bot Version:** [VERSION]

**Total Tests:** 47  
**Executed:** [ ]  
**Passed:** [ ]  
**Failed:** [ ]  
**Blocked:** [ ]  
**Not Applicable:** [ ]

**Pass Rate:** [ ]%

---

### Critical Bugs Found

**BUG #1:**
- **Test Case:** TC-041
- **Severity:** üî¥ CRITICAL
- **Description:** Admin receives "HIGH REQUEST RATE" alert about themselves
- **Expected:** No alert for admins
- **Actual:** Alert sent
- **Status:** üî¥ OPEN / üü¢ FIXED

**BUG #2:**
- **Test Case:** TC-037
- **Severity:** üü° MEDIUM
- **Description:** has_banned_words() function exists but not used (dead code)
- **Expected:** Function should be used OR deleted
- **Actual:** Dead code
- **Status:** üî¥ OPEN / üü¢ FIXED

---

### Recommendations

1. **Immediate Actions:**
   - Fix TC-041 (admin monitoring bypass)
   - Remove or implement has_banned_words()

2. **Short-term:**
   - Implement admin whitelist
   - Add enhanced logging

3. **Long-term:**
   - Role-based permissions
   - Automated testing suite

---

## üéØ ACCEPTANCE CRITERIA

### For @Developer to consider fixes complete:

‚úÖ **All Critical Tests Pass:**
- [ ] TC-001 to TC-010: Admin spam protection
- [ ] TC-011 to TC-016: Auto-posting
- [ ] TC-017 to TC-024: User spam detection
- [ ] TC-032 to TC-036: Rate limiting

‚úÖ **All Bugs Fixed:**
- [ ] BUG #1: Admin monitoring alerts (TC-041)
- [ ] BUG #2: Dead code removed/implemented (TC-037)

‚úÖ **Regression Tests Pass:**
- [ ] No new bugs introduced
- [ ] All existing functionality works

‚úÖ **Documentation Updated:**
- [ ] Code comments accurate
- [ ] README updated if needed

---

## üìû NEXT STEPS

**Current Status:** Test cases created ‚úÖ

**Next Actions:**
1. **@QA-Tester:** Execute Phase 1 tests (pre-fix)
2. **@QA-Tester:** Document bugs found
3. **@Developer:** Implement fixes based on bug report
4. **@QA-Tester:** Execute Phase 2 tests (post-fix)
5. **@QA-Tester:** Regression testing
6. **@QA-Tester:** Final test report
7. **@Developer:** Deploy to production

---

**Test Cases Created:** 2025-12-18  
**Created by:** @QA-Tester  
**Ready for:** Execution  
**Estimated Time:** 4-6 hours manual testing

**Status:** ‚úÖ **COMPLETE - READY TO TEST**

---

*"Test early, test often, test everything. Quality is not an accident."* üéØ
