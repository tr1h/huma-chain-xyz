# 🤖 Droid Context - Solana Tamagotchi

> **Quick reference for AI assistants working on this project**

---

## 🎯 Project Identity

**Name:** Solana Tamagotchi  
**Type:** Play-to-Earn Blockchain Game  
**Blockchain:** Solana (Devnet → Mainnet Q1 2026)  
**Repository:** tr1h/huma-chain-xyz  
**Website:** https://solanatamagotchi.com  
**Bot:** @gotchigamebot  

---

## 📊 Key Stats

- **Users:** 1,000+ active  
- **Transactions:** 60,000+  
- **NFTs Minted:** 104  
- **Languages:** 13  
- **Code Files:** ~300 (excluding node_modules)  
- **Status:** Production (Devnet)  

---

## 🏗️ Architecture (5-Second Overview)

```
Frontend (HTML/JS) → API (PHP/Node.js) → Database (Supabase) → Blockchain (Solana)
                  ↘ Bot (Python) ↗
```

**Stack:**
- Frontend: Vanilla JS, HTML5, CSS3
- Backend: PHP (REST API), Node.js (NFT minting)
- Bot: Python (pyTelegramBotAPI)
- Database: Supabase (PostgreSQL)
- Blockchain: Solana Web3.js
- Hosting: GitHub Pages (frontend), Render (API/bot)

---

## 📁 Critical Files

**Must-read before any task:**
- `README.md` - Project overview
- `.github/DROID_GUIDELINES.md` - Full developer guide (READ THIS!)
- `SECURITY.md` - Security rules
- `docs/` - Comprehensive documentation

**Core logic:**
- `js/auth.js` - Authentication (Telegram + Wallet)
- `api/tama_supabase.php` - Main API
- `bot/bot.py` - Telegram bot
- `bot/translations.py` - 13-language translations

**Configuration:**
- `.env` - Secrets (NEVER commit!)
- `js/config.js` - Frontend config
- `package.json` - Dependencies
- `.eslintrc.json` + `.prettierrc` - Code style

---

## 🔑 Core Rules (NEVER BREAK THESE!)

### 1. Security 🔐
- ❌ **NEVER** commit `.env`, secrets, or private keys
- ✅ Always use environment variables
- ✅ Check `SECURITY.md` before touching credentials

### 2. Multi-Language 🌍
- ❌ **NEVER** add text without translating to ALL 13 languages
- ✅ Update: `bot/translations.py`, `js/i18n.js`, landing pages
- 🌐 Languages: EN, RU, ZH, ES, PT, JA, FR, HI, KO, TR, DE, AR, VI

### 3. Database 🗄️
- ❌ **NEVER** modify Supabase directly
- ✅ Create SQL migration in `/sql` for schema changes
- ✅ Test on dev instance first

### 4. Git Workflow 🔀
- ❌ **NEVER** push directly to `main`
- ✅ Create feature branch: `feature/your-feature`
- ✅ Commit format: `type(scope): message` (Conventional Commits)

### 5. Code Quality ✨
- ✅ Run ESLint + Prettier before committing
- ✅ Test on mobile + desktop
- ✅ Check all 13 languages

---

## 🎯 Common Tasks

### Add Text to UI
1. Add to `bot/translations.py` (13 languages)
2. Add to `js/i18n.js` (13 languages)
3. Test language selector

### Add API Endpoint
1. Add function in `api/tama_supabase.php`
2. Validate inputs
3. Add rate limiting if needed
4. Document in code comments

### Add Database Table
1. Create SQL file in `/sql`
2. Test on dev Supabase
3. Enable RLS (Row Level Security)
4. Apply to production

### Fix Bug
1. Reproduce issue
2. Check logs (browser console, API logs)
3. Fix with minimal changes
4. Test thoroughly
5. Commit: `fix(scope): description`

---

## 🚀 Quick Commands

```bash
# Start development
.\scripts\dev-shortcuts.ps1 dev

# Lint & format
.\scripts\dev-shortcuts.ps1 fix

# Check code quality
.\scripts\dev-shortcuts.ps1 check

# Create feature branch
$env:HOME = "C:\goooog"; git checkout -b feature/your-feature

# Commit
git add .
git commit -m "feat(scope): your message"

# Push
git push origin feature/your-feature
```

---

## 🎮 Game Features

**Games:**
- Lucky Slots (shared jackpot pool)
- Lucky Wheel (multipliers)
- Tamagotchi (care for pet, earn TAMA)
- Super Tama Bros (platformer)
- Tama Shooter (space shooter)
- Tama Color Match (puzzle)

**NFT System:**
- 5 tiers: Bronze, Silver, Gold, Platinum, Diamond
- Earning multipliers: 2x → 5x
- Mint with TAMA or SOL

**Economy:**
- TAMA Token (Devnet)
- Referral system (10% of referrals)
- Daily rewards
- Leaderboard

---

## 🛠️ Tech Details

**Frontend:**
- No framework (vanilla JS for simplicity)
- Telegram WebApp SDK
- Solana Wallet Adapter
- Responsive design (mobile-first)

**Backend:**
- PHP REST API (lightweight, fast)
- Node.js for NFT minting (Metaplex)
- CORS properly configured
- Rate limiting (100 req/min)

**Database:**
- Supabase (managed PostgreSQL)
- RLS enabled on all tables
- 30+ SQL migrations
- Triggers for balance sync

**Bot:**
- Python 3.9+
- Flask webhook for production
- 13-language support
- Gamification (quests, badges, ranks)

---

## ⚠️ Known Issues

1. **Git config error** - Cyrillic username path  
   **Fix:** `$env:HOME = "C:\goooog"; git <command>`

2. **Old keys in git history**  
   **Status:** Need to rotate (see SECURITY.md)

3. **Code duplication** - HTML files  
   **Priority:** Medium (refactor later)

---

## 🎨 Code Style (Quick Reference)

**JavaScript:**
```javascript
// Single quotes, semicolons, 2-space indent
const fetchData = async (id) => {
  try {
    const response = await fetch(`/api/${id}`);
    return await response.json();
  } catch (error) {
    console.error('Error:', error);
    return null;
  }
};
```

**PHP:**
```php
// PSR-12, error handling, validation
function getData(string $id): ?array {
    try {
        validateInput($id);
        return queryDatabase('table', ['id' => $id]);
    } catch (Exception $e) {
        error_log('Error: ' . $e->getMessage());
        return null;
    }
}
```

**Python:**
```python
# Black formatter, type hints, docstrings
def send_message(user_id: int, text: str) -> bool:
    """Send message to user."""
    try:
        bot.send_message(user_id, text)
        return True
    except Exception as e:
        logging.error(f"Error: {e}")
        return False
```

---

## 📞 When to Ask for Help

- **Unclear requirements** - Don't guess!
- **Security concerns** - Always ask
- **Breaking changes** - Discuss first
- **Translation accuracy** - Native speakers preferred
- **Architecture changes** - Team decision

---

## 🎯 Project Goals (Context)

**Q4 2025 (Now):**
- [x] 13-language localization
- [x] SEO expansion
- [ ] Economy balancing
- [ ] Security audit

**Q1 2026 (Next):**
- [ ] Mainnet launch
- [ ] DEX listing
- [ ] Marketing campaign

**Q2 2026 (Future):**
- [ ] Mobile apps
- [ ] PvP battles
- [ ] NFT breeding

---

## 🔍 Debugging Tips

**Frontend:**
```javascript
console.log('Auth:', authState);
console.log('Telegram:', window.Telegram?.WebApp);
console.log('Language:', getCurrentLanguage());
```

**API:**
- Check Render logs: https://dashboard.render.com
- Test locally: `php -S localhost:8000` in `/api`

**Bot:**
- Enable debug: `logging.basicConfig(level=logging.DEBUG)`
- Test translation: `print(t("key", "ru"))`

---

## 📚 Full Documentation

For complete details, read:
- `.github/DROID_GUIDELINES.md` - Comprehensive guide
- `CONTRIBUTING.md` - Contribution guidelines
- `docs/` - Feature documentation

---

## ✨ Remember

This is a **live production project** with **real users** and **real crypto**.

- Test thoroughly
- Never rush security code
- Respect the community
- When in doubt, check `/docs` or ask!

---

**Version:** 1.0  
**Last Updated:** 2025-12-15  
**For:** AI Assistants (Droid, Cursor, etc.)
